# ==============================================================================
# SSH Configuration
# ==============================================================================
# Modern SSH client configuration with security best practices
# ==============================================================================

# Include host-specific configurations
Include config.d/*

# Default settings for all hosts
Host *
    # Connection multiplexing for speed
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h:%p
    ControlPersist 10m

    # Keep connections alive
    ServerAliveInterval 60
    ServerAliveCountMax 3

    # Enable compression
    Compression yes

    # Visual host key for verification
    VisualHostKey yes

    # Forward SSH agent (be careful with untrusted hosts)
    ForwardAgent no

    # Prevent man-in-the-middle attacks
    StrictHostKeyChecking ask

    # Hash known hosts for privacy
    HashKnownHosts yes

    # Use only strong ciphers
    Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr

    # Use only strong MACs
    MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512,hmac-sha2-256

    # Use only strong key exchange algorithms
    KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256

    # Prefer specific host key types
    HostKeyAlgorithms ssh-ed25519,rsa-sha2-512,rsa-sha2-256

    # Enable public key authentication
    PubkeyAuthentication yes

    # Disable less secure authentication methods
    PasswordAuthentication yes
    ChallengeResponseAuthentication no
    GSSAPIAuthentication no
