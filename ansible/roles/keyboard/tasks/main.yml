---
# ==============================================================================
# Keyboard Customization Role
# ==============================================================================
# Configures Karabiner-Elements for keyboard remapping
# Installation handled by homebrew role via Brewfile
# ==============================================================================

- name: Create Karabiner configuration directory
  file:
    path: "{{ ansible_facts['env']['HOME'] }}/.config/karabiner"
    state: directory
    mode: "0755"
  tags: keyboard

- name: Deploy Karabiner configuration (CapsLock â†’ Control)
  template:
    src: karabiner.json.j2
    dest: "{{ ansible_facts['env']['HOME'] }}/.config/karabiner/karabiner.json"
    mode: "0644"
  tags: keyboard

- name: Open Karabiner-Elements for permissions setup
  shell: open -a "Karabiner-Elements"
  ignore_errors: yes
  changed_when: false
  tags: keyboard

