---
# ==============================================================================
# Yabai Configuration Role
# ==============================================================================
# Configures yabai tiling window manager
# Hotkeys are managed by Hammerspoon (see hammerspoon role)
# Installation handled by homebrew role via Brewfile
# ==============================================================================

- name: Deploy yabairc configuration
  copy:
    src: yabairc
    dest: "{{ ansible_facts['env']['HOME'] }}/.yabairc"
    mode: '0755'
  tags: yabai

- name: Check if yabai is running
  shell: launchctl list | grep yabai || true
  register: yabai_status
  changed_when: false
  tags: yabai

- name: Start yabai service
  command: yabai --start-service
  when: yabai_status.stdout == ""
  tags: yabai

- name: Restart yabai service if already running
  command: yabai --restart-service
  when: yabai_status.stdout != ""
  tags: yabai
